# -

贵族决斗小游戏规则：
每位用户第一次创建贵族时初始拥有1000金币和500声望。

每日签到系统：
基于APScheduler 定时任务插件设置一个定时任务，在每天午夜重置用户的签到状态，签到奖励的金币和声望为400-600的随机数

声望系统：
1、爵位与声望相关，声望越高爵位越高。
获得声望方法：贵族决斗。

爵位系统如下：
​国王（声望达到5000）、公爵（声望达到4000）、​侯爵（声望达到3000）、​伯爵（声望达到2000）​、子爵（声望达到1000）、​男爵（初始爵位 声望500）

女友系统如下：
1、女友总数为200（即生成1-200的id，每一个女友对应一个id，我要求你随机生成200个女友名，名字最少一个字最多四个字，且要求是中文名），初始每个人最多拥有5个女友，提升爵位可以提高女友上限，最高30个。
2、女友可分手，分手需要消耗用户200金币。
3、女友初始好感度为0，最高好感度为0，给女友送礼物可提升好感度。

礼物如下：50
        "玩偶"    : 女友获得5好感,     商店购买时玩家消耗10金币
        "礼服"    : 女友获得10好感,    商店购买时玩家消耗20金币
        "歌剧门票": 女友获得15好感,   商店购买时玩家消耗30金币 
        "水晶球"  : 女友获得20好感,    商店购买时玩家消耗40金币 
        "耳环"    : 女友获得25好感,    商店购买时玩家消耗50金币
        "发饰"    : 女友获得30好感,    商店购买时玩家消耗60金币
        "小裙子"  : 女友获得35好感,    商店购买时玩家消耗70金币
        "热牛奶"  : 女友获得40好感,    商店购买时玩家消耗80金币
        "书"      : 女友获得45好感,    商店购买时玩家消耗90金币
        "鲜花"    : 女友获得50好感,    商店购买时玩家消耗100金币
礼物获得方式：商城购买。


金币系统：
获取方式：决斗，签到.

贵族决斗系统
1、决斗采用俄罗斯轮盘的方式进行。
2、决斗时两个人必须都是贵族且已拥有女友，输家会随机被抢走一个女友并扣除100金币和100声望。赢家获得输家的一个女友，并且获得200金币和300声望。
3、决斗开始时双方初始生命值为6。
4、决斗开始时双方都拥有一把枪且每一回合有一次开枪机会，每一次开枪只有1/6的几率会射出子弹，子弹伤害均为1。
5、开枪前可以选择是否使用道具。
6、每个人每天发起决斗上限为10次。

道具系统
1、道具可通过商城购买。
2、每一次决斗每个道具只能使用一次。
道具如下：
        "手铐"：使用后可以使对方停止行动一个回合。
        "酒"：  使用后可以使下一回合伤害+1。
        "饮料"：使用后可以回复一点生命值。
        "刀"：  使用后直接对对手造成2的伤害。

以下为游戏指令及相关细节：
当用户发送指令“创建贵族”时，先判断该用户是否为贵族
如果不是贵族，则初始化该用户的“用户数据”到data.json下，然后机器人发送消息“贵族创建成功！您现在是一名男爵，祝您好运！”。如果是贵族，则机器人发送消息“您已经是贵族啦！不能重复创建！”

当用户发送指令 “贵族查询”，先判断该用户是否为贵族
如果不是贵族，则机器人发送消息“您还未在本群创建过贵族，请发送“ 创建贵族 ”开始您的贵族之旅。”。如果是贵族，则机器人发送消息“您当前的爵位是：该用户当前爵位。（换行）
您当拥有xx声望（换行）您当前持有xx金币（换行）您当前拥有xx个女友（换行）”。

当用户发送指令“贵族约会”，先判断该用户金币数量是否满足招募女友的金币要求
如果满足要求，则该用户将会消耗300金币获得一个女友。如果不满足条件，则机器人发送消息“您目前的金币数量不足，可以通过每日签到和贵族决斗来获取金币”。

当用户发送指令“升级爵位”，先判断该用户声望是否满足升级对应爵位的声望需求
如果满足升级爵位声望需求，则机器人发送消息“升级爵位成功，您目前的爵位是xx）”，xx为用户升级后的爵位。如果不满足升级爵位声望需求，则机器人发送消息“很抱歉，您的声望目前还不够升级到下一个爵位，请努力加油获取声望吧”。

当用户发送指令“查询金币”，则机器人发送消息“您当前持有xx金币”。

当用户发送指令“贵族签到”，则机器人发送“签到成功，今日奖励xx金币和xx声望”，xx为400-600的随机数。

当用户发送指令“贵族决斗”，先判断当前是否已经创建了一场决斗，每场决斗只允许有两名用户进行决斗。
如果已经创建了一场决斗，则机器人发送消息“当前已经存在决斗，请先等待本次决斗结束”
如果当前没有决斗的存在，则机器人发送消息“决斗创建成功，请接受决斗玩家发送“接受决斗或拒绝决斗，若30秒内无人接受挑战则此次对决作废”
如果接受决斗玩家发送指令“接受决斗”，则机器人发送消息“决斗开始，如果决斗出现bug请发送“重置决斗”结束该轮决斗”
决斗进行时
首先由用户1发送指令，如果用户1在发送开枪指令之前发送指令“使用道具 道具名”，则机器人发送消息“使用道具成功+道具的效果描述”。
当用户1发送指令“开枪”用户可以是自己也可以是别人，机器人先跟进决斗规则进行判断<
如果被@的用户尚未中枪，则机器人发送消息“@用户开了一次枪，但很遗憾枪里没有子弹，尚未造成任何伤害”。
如果被@的用户中枪了，则机器人发送消息“@用户开了一次枪，并且对@用户造成了x点伤害”。x为普通子弹的1点伤害，使用道具会使x的数值变化。>
当用户1发送完开枪指令后，机器人发送消息“@用户1的回合结束，请@用户2发送相关决斗指令”
其次由用户2发送指令，如果用户2在发送开枪指令之前发送指令“使用道具+道具名”，则机器人发送消息“使用道具成功+道具的效果描述”。
当用户2发送指令“开枪”用户可以是自己也可以是别人，机器人先跟进决斗规则进行判断<
如果被@的用户尚未中枪，则机器人发送消息“@用户开了一次枪，但很遗憾枪里没有子弹，尚未造成任何伤害”。
如果被@的用户中枪了，则机器人发送消息“@用户开了一次枪，并且对@用户造成了x点伤害”。x为普通子弹的1点伤害，使用道具会使x的数值变化。>
每一次决斗每个道具只能使用一次，当用户发送“使用道具+道具名”时，先判断用户在本次决斗中是否使用过该道具
如果使用过该道具，则机器人发送“您已经使用过该道具，无法再使用！”。如果未使用过该道具，则机器人发送消息“使用道具成功+道具的效果描述”。
当两名用户都使用过开枪指令后，机器人发送指令“当前回合结束（换行）@用户1剩余血量为：x，已使用道具为：（本次决斗使用的道具名）。（换行）
@用户2剩余血量为：x，已使用道具为：（本次决斗使用的道具名）（换行）新的回合开始！”
一直重复上面的行为，直到用户1或者用户2的血量为0
当用户1或者用户2的血量为0时，机器人发送消息“xx用户获得了本次决斗的胜利，获得200金币和300声望，且抢夺了@血量为0的用户的一位“（女友名）”女友（换行）
@血量为0的用户+失去了100金币，100声望和一位女友”。
如果接受决斗玩家发送指令“拒绝决斗”，则机器人发送消息“@用户拒绝了决斗”用户为拒绝决斗的用户。

当用户发送指令“查询女友数量”，则机器人发送消息“您目前有x位女友”
当用户发送指令“查询女友 女友序号”，先判断用户是否拥有该女友
如果用户拥有该女友，则机器人发送消息“该女友的名字为xxx，目前对你的好感度为x”。如果用户没有该女友，则机器人发送消息“您尚未拥有该女友”
当用户发送指令“好感度查询”，则机器人发送消息“您目前所有女友的好感度为：（换行）女友名+好感度（换行）”，好感度生成列表循环操作为目前用户所持有女友数，循环操作超过女友数时停止循环。
当用户发送指令“礼物名字 女友名”或者“礼物名+女友序号”，先判断用户是否拥有该礼物
如果有该礼物，则机器人发送消息“送礼成功，xxx对你增加了x好感”xxx为女友名，x为赠送礼物所具有的好感。如果没有该礼物，则机器人发送“赠送失败，您尚未拥有该礼物”
当用户发送指令“分手 女友名”，先判断用户是否拥有该女友
如果用户拥有该女友，则机器人发送消息“分手成功，扣除200金币”。如果用户没有该女友，则机器人发送消息“您尚未拥有该女友”

当用户发送指令“购买道具 道具名”，先判断用户金币是否满足购买条件
如果满足购买条件，则机器人发送消息“购买成功，您目前持有该道具x个”。如果不满足购买条件，则机器人发送消息“很抱歉，您的金币不足，可以通过每日签到和贵族决斗来获取金币”
当用户发送指令“道具查询”，先判断用户是否持有道具
如果用户持有道具，则机器人发送消息“您当前持有的道具有：道具名 道具数量（换行）”，循环生成列表直到超过用户持有数量个数。如果用户尚未持有道具，则机器人发送消息“您尚未持有道具，可通过指令“购买道具+道具名”来购买道具”
